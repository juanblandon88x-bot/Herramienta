<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Herramienta Prueba</title>
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <link rel="stylesheet" href="/src/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Agbalumo&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <meta property="og:image" content="https://bolt.new/static/og_default.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:image" content="https://bolt.new/static/og_default.png" />
  </head>
  <body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="app-screen">
        <div class="card welcome-card">
            <h2 class="welcome-title">Herramienta En Prueba</h2>
            <p class="selection-subtitle" style="margin-bottom: var(--spacing-lg); text-align: center; color: var(--text-color-secondary);">Selecciona el juego</p>
            <div class="game-selector-grid">
                <button class="game-button" data-game="aviator">
                    <span class="game-icon">‚úàÔ∏è</span>
                    <span class="game-name">Aviator</span>
                </button>
                <button class="game-button" data-game="spaceman">
                    <span class="game-icon">üöÄ</span>
                    <span class="game-name">Spaceman</span>
                </button>
            </div>
            <div class="welcome-buttons">
                <button id="welcome-continue" class="action-button" disabled>Continuar</button>
                <button id="welcome-manual" class="action-button secondary">üìñ Manual de Uso</button>
            </div>
        </div>
    </div>

    <!-- Manual de Uso Modal -->
    <div id="manual-modal" class="modal hidden">
        <div class="modal-content manual-modal-content">
            <div class="modal-header">
                <h2>Manual de Uso</h2>
                <button id="close-manual" class="close-modal">&times;</button>
            </div>
            <div class="modal-body manual-body">
                <div class="manual-section">
                    <h3>1. Configuraci√≥n Inicial</h3>
                    <ul>
                        <li><strong>Selecci√≥n de Moneda:</strong> Elige tu moneda preferida (USD, MXN, ARS, COP, BRL, CLP, PEN, VES, DOP, GTQ).</li>
                        <li><strong>Gesti√≥n de Bank:</strong> Decide si deseas activar la gesti√≥n autom√°tica de capital.</li>
                        <li><strong>Capital Inicial:</strong> Ingresa el monto inicial con el que trabajar√°s. Usa punto (.) o coma (,) seg√∫n tu moneda.</li>
                        <li><strong>Take Profit (TP):</strong> Define tu meta de ganancia para la sesi√≥n.</li>
                        <li><strong>Stop Loss (SL):</strong> Establece el l√≠mite m√°ximo de p√©rdida permitida.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>2. Interfaz Principal</h3>
                    <ul>
                        <li><strong>Gr√°fico Principal:</strong> Muestra la evoluci√≥n de los valores en tiempo real con velas japonesas.</li>
                        <li><strong>Gr√°fico de Tendencias:</strong> Visualizaci√≥n simplificada de la tendencia actual.</li>
                        <li><strong>Barra de Tendencia:</strong> Indica la fuerza alcista (verde) o bajista (roja).</li>
                        <li><strong>Reloj:</strong> Muestra la hora actual en la parte superior del gr√°fico.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>3. Botones de Entrada</h3>
                    <p>Los botones representan diferentes rangos de valores:</p>
                    <ul>
                        <li><strong>1.00 / 1,09 a 1.80 / 1.99:</strong> Valores bajos (se√±ales de p√©rdida o segunda oportunidad)</li>
                        <li><strong>2.00 / 3.99 a 10+:</strong> Valores altos (se√±ales de ganancia)</li>
                    </ul>
                    <p><strong>Regla de Ganancia:</strong> Al hacer clic en un bot√≥n con valor ‚â• 2.00, se considera una ganancia.</p>
                </div>

                <div class="manual-section">
                    <h3>4. Sistema de Apuestas</h3>
                    <ul>
                        <li><strong>Intento 1:</strong> Primera apuesta calculada autom√°ticamente como porcentaje de tu bank.</li>
                        <li><strong>Intento 2:</strong> Si fallas el Intento 1, se realiza autom√°ticamente el doble del Intento 1.</li>
                        <li><strong>C√°lculo de Ganancias:</strong> Al ganar, recibes el DOBLE de lo apostado.</li>
                        <li><strong>Ejemplo:</strong> Si apuestas $100 y ganas, recibes $200 (doble de $100).</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>5. Se√±ales del Sistema</h3>
                    <ul>
                        <li><strong>ENTRADA:</strong> Se√±al para realizar la primera apuesta.</li>
                        <li><strong>¬°ACIERTO!</strong> Ganaste en el primer o segundo intento.</li>
                        <li><strong>SEGUNDA OPORTUNIDAD:</strong> Fallaste el Intento 1, ahora tienes el Intento 2.</li>
                        <li><strong>¬°FALLO!</strong> Perdiste ambos intentos.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>6. Funciones Avanzadas</h3>
                    <ul>
                        <li><strong>Fibonacci:</strong> Dibuja niveles de retroceso de Fibonacci en el gr√°fico principal.</li>
                        <li><strong>Mini Fibonacci:</strong> Aplica Fibonacci en el gr√°fico de tendencias.</li>
                        <li><strong>Zoom In/Out:</strong> Acerca o aleja la vista del gr√°fico.</li>
                        <li><strong>Retroceder:</strong> Deshace la √∫ltima acci√≥n.</li>
                        <li><strong>Reiniciar:</strong> Resetea toda la sesi√≥n (muestra resumen antes de confirmar).</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>7. Gesti√≥n de Bank</h3>
                    <ul>
                        <li><strong>Take Profit:</strong> Cuando alcanzas tu meta de ganancia, se muestra un modal y la sesi√≥n se reinicia.</li>
                        <li><strong>Stop Loss:</strong> Si alcanzas el l√≠mite de p√©rdida, se detiene la sesi√≥n autom√°ticamente.</li>
                        <li><strong>Porcentajes:</strong> El sistema ajusta autom√°ticamente los porcentajes de apuesta seg√∫n tu rendimiento.</li>
                        <li><strong>Anti-Martingale:</strong> Reduce las apuestas cuando ganas y las aumenta cuando pierdes para recuperar p√©rdidas.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>8. Estad√≠sticas</h3>
                    <ul>
                        <li><strong>ROI:</strong> Retorno sobre inversi√≥n.</li>
                        <li><strong>Win Rate:</strong> Porcentaje de operaciones ganadoras.</li>
                        <li><strong>Profit Factor:</strong> Ratio entre ganancias y p√©rdidas.</li>
                        <li><strong>Rachas:</strong> Mejor y peor racha de resultados consecutivos.</li>
                        <li><strong>Gr√°fico de Evoluci√≥n:</strong> Visualiza c√≥mo cambia tu bank a lo largo del tiempo.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>9. Historial de Se√±ales</h3>
                    <ul>
                        <li>Registra todas las se√±ales generadas con sus resultados.</li>
                        <li>Filtra por resultado (ganadas/perdidas) o por intento (1 o 2).</li>
                        <li>Exporta el historial para an√°lisis externo.</li>
                        <li>Limpia el historial cuando lo necesites.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>10. Configuraci√≥n</h3>
                    <ul>
                        <li><strong>Odds Personalizadas:</strong> Ajusta las odds para Apuesta 1 y Apuesta 2 (actualmente se usa el doble de lo apostado).</li>
                        <li><strong>Notificaciones:</strong> Activa o desactiva sonidos y notificaciones.</li>
                    </ul>
                </div>

                <div class="manual-section">
                    <h3>11. Consejos Importantes</h3>
                    <ul>
                        <li>‚úÖ Siempre establece un Stop Loss para proteger tu capital.</li>
                        <li>‚úÖ Define metas realistas de Take Profit.</li>
                        <li>‚úÖ No apuestes m√°s del 5% de tu bank en una sola operaci√≥n.</li>
                        <li>‚úÖ Revisa las estad√≠sticas regularmente para evaluar tu rendimiento.</li>
                        <li>‚úÖ Usa el historial para identificar patrones y mejorar tu estrategia.</li>
                        <li>‚ö†Ô∏è El sistema es una herramienta de apoyo, no garantiza ganancias.</li>
                        <li>‚ö†Ô∏è Gestiona tu bank de forma responsable.</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-manual-footer" class="action-button">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Aviator Mode Selection Screen -->
    <div id="aviator-mode-screen" class="app-screen hidden">
        <div class="card">
            <h3>‚úàÔ∏è Aviator - Selecciona el Modo</h3>
            <p class="selection-subtitle" style="margin-bottom: var(--spacing-lg); text-align: center; color: var(--text-color-secondary);">¬øC√≥mo deseas ingresar los datos?</p>
            <div class="mode-selector-grid">
                <button class="mode-button" data-mode="automatic">
                    <span class="mode-icon">ü§ñ</span>
                    <span class="mode-name">Autom√°tico</span>
                    <span class="mode-desc">Conecta con la API en tiempo real</span>
                </button>
                <button class="mode-button" data-mode="manual">
                    <span class="mode-icon">‚úã</span>
                    <span class="mode-name">Manual</span>
                    <span class="mode-desc">Ingresa los datos manualmente</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Currency Selection Screen -->
    <div id="currency-selection-screen" class="app-screen hidden">
        <div class="card">
            <h3>Selecciona tu Moneda</h3>
            <p class="selection-subtitle">Elige la moneda para gestionar tus operaciones. Cada moneda tiene porcentajes de apuesta optimizados.</p>
            <div class="currency-grid">
                <button class="currency-button" data-currency="USD" data-symbol="$">
                    <span class="currency-code">USD</span>
                    <span class="currency-name">D√≥lar</span>
                    <span class="currency-symbol">$</span>
                </button>
                <button class="currency-button" data-currency="MXN" data-symbol="$">
                    <span class="currency-code">MXN</span>
                    <span class="currency-name">Peso Mexicano</span>
                    <span class="currency-symbol">$</span>
                </button>
                <button class="currency-button" data-currency="ARS" data-symbol="$">
                    <span class="currency-code">ARS</span>
                    <span class="currency-name">Peso Argentino</span>
                    <span class="currency-symbol">$</span>
                </button>
                <button class="currency-button" data-currency="COP" data-symbol="$">
                    <span class="currency-code">COP</span>
                    <span class="currency-name">Peso Colombiano</span>
                    <span class="currency-symbol">$</span>
                </button>
                <button class="currency-button" data-currency="BRL" data-symbol="R$">
                    <span class="currency-code">BRL</span>
                    <span class="currency-name">Real Brasile√±o</span>
                    <span class="currency-symbol">R$</span>
                </button>
                <button class="currency-button" data-currency="CLP" data-symbol="$">
                    <span class="currency-code">CLP</span>
                    <span class="currency-name">Peso Chileno</span>
                    <span class="currency-symbol">$</span>
                </button>
                <button class="currency-button" data-currency="PEN" data-symbol="S/">
                    <span class="currency-code">PEN</span>
                    <span class="currency-name">Sol Peruano</span>
                    <span class="currency-symbol">S/</span>
                </button>
                <button class="currency-button" data-currency="VES" data-symbol="Bs.">
                    <span class="currency-code">VES</span>
                    <span class="currency-name">Bol√≠var Venezolano</span>
                    <span class="currency-symbol">Bs.</span>
                </button>
                <button class="currency-button" data-currency="DOP" data-symbol="$">
                    <span class="currency-code">DOP</span>
                    <span class="currency-name">Peso Dominicano</span>
                    <span class="currency-symbol">$</span>
                </button>
                <button class="currency-button" data-currency="GTQ" data-symbol="Q">
                    <span class="currency-code">GTQ</span>
                    <span class="currency-name">Quetzal Guatemalteco</span>
                    <span class="currency-symbol">Q</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Bank Management Choice Screen -->
    <div id="bank-choice-screen" class="app-screen hidden">
        <div class="card">
            <h3>¬øDeseas Gestionar Bank</h3>
            <div class="button-group">
                <button id="bank-yes" class="choice-button">S√≠</button>
                <button id="bank-no" class="choice-button">no</button>
            </div>
        </div>
    </div>

    <!-- Capital Input Screen -->
    <div id="capital-input-screen" class="app-screen hidden">
        <div class="card">
            <h3>Ingrese su capital para invertir</h3>
            <div class="capital-input-wrapper">
                <span id="currency-preview" class="currency-preview">$</span>
                <input type="text" id="capital-input" placeholder="Ej: 200.000" inputmode="numeric">
            </div>
            <p class="input-hint" id="capital-input-hint" style="margin-top: 10px; font-size: 0.85em; color: var(--text-color-secondary);">Formato: usar punto (.) o coma (,) seg√∫n tu moneda</p>
            <button id="capital-continue" class="action-button">Continuar</button>
        </div>
    </div>

    <!-- Take Profit and Stop Loss Input Screen -->
    <div id="tp-sl-input-screen" class="app-screen hidden">
        <div class="card">
            <h3>Configurar Objetivos</h3>
            
            <div style="margin-bottom: var(--spacing-xl);">
                <h4 style="margin-bottom: var(--spacing-md); font-size: 1em; color: var(--text-color-primary); font-weight: 600;">Take Profit (Meta de Ganancia)</h4>
                <div class="capital-input-wrapper">
                    <span id="currency-preview-tp" class="currency-preview">$</span>
                    <input type="text" id="take-profit-input" placeholder="Ej: 50.000" inputmode="numeric">
                </div>
                <p class="input-hint" id="tp-input-hint" style="margin-top: 10px; font-size: 0.85em; color: var(--text-color-secondary);">Ganancia objetivo para esta sesi√≥n</p>
            </div>
            
            <div style="margin-bottom: var(--spacing-xl);">
                <h4 style="margin-bottom: var(--spacing-md); font-size: 1em; color: var(--text-color-primary); font-weight: 600;">Stop Loss (L√≠mite de P√©rdida)</h4>
                <div class="capital-input-wrapper">
                    <span id="currency-preview-sl" class="currency-preview">$</span>
                    <input type="text" id="stop-loss-input" placeholder="Ej: 20.000" inputmode="numeric">
                </div>
                <p class="input-hint" id="sl-input-hint" style="margin-top: 10px; font-size: 0.85em; color: var(--text-color-secondary);">P√©rdida m√°xima permitida</p>
            </div>
            
            <button id="start-bank-management" class="action-button">Iniciar</button>
        </div>
    </div>

    <!-- Main Application Content (hidden initially) -->
    <div id="app-content" class="hidden">
        <!-- Header removed per request (title container not necessary) -->

        <main id="main-app-layout">
            <div id="main-content-wrapper">
                <section id="chart-section">
                    <!-- Wrapper for Chart and Trend Bar -->
                    <div id="chart-and-trend-wrapper">
                        <div id="chart-container">
                            <div id="clock" class="chart-clock"></div> <!-- Clock is now here -->
                            <svg id="chart">
                                <g class="grid x-grid"></g> <!-- X-axis grid lines -->
                                <g class="grid y-grid"></g> <!-- Y-axis grid lines -->
                                <g class="fibonacci-group"></g> <!-- Group for Fibonacci elements -->
                            </svg>
                            <div id="mini-chart-container">
                                <svg id="mini-chart"></svg>
                            </div>
                            <div id="signal-overlay-message" class="signal-message"></div> <!-- New div for signal messages -->
                            <div id="session-stats" class="mobile-only"></div> <!-- New div for session counters -->
                        </div>

                        <!-- New Trend Indicator Bar -->
                        <div id="trend-indicator-bar">
                            <div class="trend-section bullish-strength"></div>
                            <div class="trend-section bearish-strength"></div>
                            <div class="trend-label"></div>
                            <div class="trend-marker trend-marker-50"></div>
                            <div class="trend-marker trend-marker-40"></div>
                            <div class="trend-marker trend-marker-60"></div>
                        </div>
                    </div>
                    
                    <div id="buttons-panel">
                    <!-- Moved bank/gestion and view selector here to free header space -->
                    <div id="panel-top-controls" class="panel-top-controls">
                        <div id="view-selector-container">
                            <label for="chart-view-selector" class="sr-only">Seleccionar vista del gr√°fico</label>
                            <select id="chart-view-selector">
                                <option value="both">Ambos gr√°ficos</option>
                                <option value="main">Gr√°fico profesional</option>
                                <option value="mini">Gr√°fico de tendencia</option>
                            </select>
                        </div>
                        <div id="apuesta-info-panel">
                            <div id="current-bank-display" class="info-label">Bank: --</div>
                            <div class="apuesta-labels-row">
                                <div class="apuesta-label" id="apuesta-1">Intento 1: --</div>
                                <div class="apuesta-label" id="apuesta-2">Intento 2: --</div>
                            </div>
                        </div>
                    </div>
                    <!-- Botones manuales - se muestran en modo manual -->
                    <div id="manual-input-buttons" class="input-buttons-grid" style="display: none;">
                        <button data-value="-5" data-mini-value="-1">1.00 / 1,09</button>
                        <button data-value="-4" data-mini-value="-1">1.10 / 1.29</button>
                        <button data-value="-3" data-mini-value="-1">1.30 / 1.49</button>
                        <button data-value="-2" data-mini-value="-1">1.50 / 1.79</button>
                        <button data-value="-1" data-mini-value="-1">1.80 / 1.99</button>
                    
                        <button data-value="1" data-mini-value="1">2.00 / 3.99</button>
                        <button data-value="2" data-mini-value="1">4.00 / 5.99</button>
                        <button data-value="3" data-mini-value="1">6.00 / 7,99</button>
                        <button data-value="4" data-mini-value="1">8.00 / 9,99</button>
                        <button data-value="5" data-mini-value="1">10+</button>
                    </div>
                    <!-- Panel de √∫ltimos resultados API - se muestra en modo autom√°tico -->
                    <div id="api-results-panel" class="api-results-panel" style="display: none;">
                        <div class="api-results-header">
                            <span class="api-status-indicator" id="api-status"></span>
                            <span>√öltimos Resultados API</span>
                        </div>
                        <div id="api-results-list" class="api-results-list"></div>
                    </div>
                    <div class="action-buttons-row">
                    <button id="undo">Retroceder</button>
                    <button data-action="fibonacci">Fibonacci</button>
                    <button data-action="mini-fibonacci">Mini Fibonacci</button>
                    <button data-action="bollinger">Bollinger</button>
                    <button id="settings-btn" class="action-button-small" title="Configuraci√≥n">‚öôÔ∏è</button>
                    <button id="zoom-in" class="zoom-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
                            </svg>
                        </button>
                        <button id="zoom-out" class="zoom-button">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"/>
                            </svg>
                        </button>
                        <button id="reset">Reiniciar</button>
                    </div>
                </div>
                </section>
            </div>
            
            <!-- Bottom Sections Container -->
            <div id="bottom-sections-container">
                <!-- Statistics Panel -->
                <section id="statistics-section">
                <div id="statistics-container">
                    <div class="stats-header">
                        <h3>Estad√≠sticas Avanzadas</h3>
                        <button id="toggle-stats" class="toggle-button" title="Minimizar/Maximizar">‚àí</button>
                    </div>
                    <div id="stats-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">ROI</div>
                                <div class="stat-value" id="stat-roi">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Win Rate</div>
                                <div class="stat-value" id="stat-winrate">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Profit Factor</div>
                                <div class="stat-value" id="stat-profitfactor">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Ganancia Total</div>
                                <div class="stat-value profit" id="stat-totalprofit">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">P√©rdida Total</div>
                                <div class="stat-value loss" id="stat-totalloss">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Ganancia/P√©rdida Net</div>
                                <div class="stat-value" id="stat-net">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Mejor Racha</div>
                                <div class="stat-value profit" id="stat-beststreak">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Peor Racha</div>
                                <div class="stat-value loss" id="stat-worststreak">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Promedio Ganancia</div>
                                <div class="stat-value profit" id="stat-avgprofit">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Promedio P√©rdida</div>
                                <div class="stat-value loss" id="stat-avgloss">--</div>
                            </div>
                        </div>
                        <div class="performance-chart-container">
                            <h4>Evoluci√≥n del Bank</h4>
                            <svg id="performance-chart" width="100%" height="150"></svg>
                        </div>
                    </div>
                </div>
                </section>

                <!-- Signal History Panel -->
                <section id="signal-history-section">
                <div id="signal-history-container">
                    <div class="history-header-section">
                        <h3>Historial de Se√±ales</h3>
                        <div class="history-controls">
                            <button id="export-history" class="action-btn-small" title="Exportar historial">üì• Exportar</button>
                            <button id="clear-history" class="action-btn-small danger" title="Limpiar historial">üóëÔ∏è Limpiar</button>
                        </div>
                    </div>
                    <div class="history-filters">
                        <select id="filter-result" class="filter-select">
                            <option value="all">Todos los resultados</option>
                            <option value="win">Solo ganadas</option>
                            <option value="loss">Solo perdidas</option>
                        </select>
                        <select id="filter-attempt" class="filter-select">
                            <option value="all">Todos los intentos</option>
                            <option value="1">1 intento</option>
                            <option value="2">2 intentos</option>
                        </select>
                        <input type="date" id="filter-date" class="filter-select" title="Filtrar por fecha">
                    </div>
                    <div id="signal-history-list">
                        <div class="history-empty">No hay se√±ales registradas a√∫n</div>
                    </div>
                </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Session Summary Modal -->
    <div id="session-summary-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Resumen de Sesi√≥n</h2>
                <button id="close-summary" class="close-modal">&times;</button>
            </div>
            <div id="summary-content" class="modal-body">
                <!-- Summary content will be generated here -->
            </div>
            <div class="modal-footer">
                <button id="confirm-reset" class="action-button danger">Confirmar Reinicio</button>
                <button id="cancel-reset" class="action-button">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configuraci√≥n</h2>
                <button id="close-settings" class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Estrategias de Se√±ales (Multi-selecci√≥n)</h3>
                    <div class="setting-item" style="display: block;">
                        <div id="strategies-container" style="display: flex; flex-direction: column; gap: 8px;">
                            <label><input type="checkbox" name="strategy" value="automatic"> Autom√°tico (Todas)</label>
                            
                            <strong>Estrategias T√©cnicas</strong>
                            <label><input type="checkbox" name="strategy" value="original"> Original (EMA + Vela) - 22-30%</label>
                            <label><input type="checkbox" name="strategy" value="momentum_hybrid"> Momentum H√≠brido - 75-80%</label>
                            <label><input type="checkbox" name="strategy" value="mean_reversion_rsi"> Mean Reversion + RSI - 65-75%</label>
                            <label><input type="checkbox" name="strategy" value="engulfing"> Engulfing Pattern - 65-70%</label>
                            
                            <strong>Estrategias por Rondas</strong>
                            <label><input type="checkbox" name="strategy" value="confirmacion_doble"> Confirmaci√≥n Doble por Se√±al - 72-80%</label>
                            <label><input type="checkbox" name="strategy" value="ronda_verde_previa"> Se√±al + Ronda Verde Previa - 70-77%</label>
                            <label><input type="checkbox" name="strategy" value="bloque_2_senales"> Bloque de 2 Se√±ales - 68-74%</label>
                            <label><input type="checkbox" name="strategy" value="ventana_limpia"> Ventana Limpia - 67-73%</label>
                            <label><input type="checkbox" name="strategy" value="filtro_anti_pico"> Filtro Anti-Pico - 66-72%</label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Herramientas de An√°lisis</h3>
                    <div class="setting-item">
                        <label for="bollinger-period">Bollinger Period:</label>
                        <input type="number" id="bollinger-period" value="20" min="1">
                    </div>
                    <div class="setting-item">
                        <label for="bollinger-stddev">Bollinger StdDev:</label>
                        <input type="number" id="bollinger-stddev" value="2" step="0.1" min="0.1">
                    </div>
                    <div class="setting-item">
                        <label for="fibonacci-levels">Fibonacci Levels (sep. por coma):</label>
                        <input type="text" id="fibonacci-levels" value="0, 0.236, 0.382, 0.5, 0.618, 0.786, 1">
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Modo de Juego (Seguro)</h3>
                    <div class="setting-item">
                        <label for="safe-mode-multiplier">Multiplicador Objetivo:</label>
                        <select id="safe-mode-multiplier">
                            <option value="2.00" selected>Seguro 2.00x</option>
                            <option value="1.70">Seguro 1.70x</option>
                            <option value="1.50">Seguro 1.50x</option>
                        </select>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>Odds Personalizadas (Manual)</h3>
                    <div class="setting-item">
                        <label for="custom-odds-1">Odds Apuesta 1:</label>
                        <input type="number" id="custom-odds-1" step="0.01" min="1.01" value="1.80">
                    </div>
                    <div class="setting-item">
                        <label for="custom-odds-2">Odds Apuesta 2:</label>
                        <input type="number" id="custom-odds-2" step="0.01" min="1.01" value="2.30">
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Notificaciones</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="sound-enabled" checked>
                            Activar sonidos
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="notifications-enabled" checked>
                            Activar notificaciones
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings" class="action-button">Guardar</button>
                <button id="cancel-settings" class="action-button">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Meta Alcanzada -->
    <div id="meta-alcanzada-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-titulo">Meta Alcanzada</h2>
                <button id="modal-cerrar" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-stats-grid">
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Juegos Jugados:</span>
                        <span class="modal-stat-value" id="modal-juegos-jugados">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganados a 1 Intento:</span>
                        <span class="modal-stat-value profit" id="modal-ganados-1">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganados a 2 Intentos:</span>
                        <span class="modal-stat-value profit" id="modal-ganados-2">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">P√©rdidas:</span>
                        <span class="modal-stat-value loss" id="modal-perdidas">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganancia Total:</span>
                        <span class="modal-stat-value profit" id="modal-ganancia-total">$0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">P√©rdida Total:</span>
                        <span class="modal-stat-value loss" id="modal-perdida-total">$0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganancia/P√©rdida Net:</span>
                        <span class="modal-stat-value" id="modal-net">$0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Win Rate:</span>
                        <span class="modal-stat-value" id="modal-winrate">0%</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modal-aceptar" class="modal-button">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Spaceman Application Content (hidden initially) -->
    <div id="spaceman-app-content" class="hidden">
        <main id="spaceman-main-app-layout">
            <div id="spaceman-main-content-wrapper">
                <section id="spaceman-chart-section">
                    <div id="spaceman-chart-and-wrapper">
                        <div id="spaceman-chart-container-wrapper">
                            <div id="spaceman-clock" class="chart-clock"></div>
                            <div id="spaceman-chart-container" class="spaceman-chart-canvas-container">
                                <canvas id="spaceTrendChart"></canvas>
                                <canvas id="spaceTrendLineChart"></canvas>
                            </div>
                            <div id="spaceman-signal-overlay-message" class="signal-message"></div> <!-- Signal messages for Spaceman -->
                            <div id="spaceman-prediction" class="spaceman-prediction-overlay">
                                <div class="spaceman-prediction-text">Cargando...</div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="spaceman-buttons-panel">
                        <div id="spaceman-panel-top-controls" class="panel-top-controls">
                            <div id="spaceman-view-selector-container">
                                <label for="spaceman-chart-view-selector" class="sr-only">Seleccionar vista del gr√°fico</label>
                                <select id="spaceman-chart-view-selector">
                                    <option value="candlestick">Velas</option>
                                    <option value="trend">Tendencia</option>
                                </select>
                            </div>
                            <div id="spaceman-apuesta-info-panel">
                                <div id="spaceman-current-bank-display" class="info-label">Bank: --</div>
                                <div class="apuesta-labels-row">
                                    <div class="apuesta-label" id="spaceman-apuesta-1">Intento 1: --</div>
                                    <div class="apuesta-label" id="spaceman-apuesta-2">Intento 2: --</div>
                                </div>
                            </div>
                            <div id="spaceman-results-display" class="spaceman-results-container">
                                <div class="spaceman-results-label">√öltimos resultados:</div>
                                <div id="spaceman-results" class="spaceman-results-list"></div>
                            </div>
                        </div>
                        <div id="spaceman-support-resistance-display">
                       
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Bottom Sections Container for Spaceman -->
            <div id="spaceman-bottom-sections-container">
                <!-- Statistics Panel -->
                <section id="spaceman-statistics-section">
                <div id="spaceman-statistics-container">
                    <div class="stats-header">
                        <h3>Estad√≠sticas Avanzadas</h3>
                        <button id="spaceman-toggle-stats" class="toggle-button" title="Minimizar/Maximizar">‚àí</button>
                    </div>
                    <div id="spaceman-stats-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-label">ROI</div>
                                <div class="stat-value" id="spaceman-stat-roi">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Win Rate</div>
                                <div class="stat-value" id="spaceman-stat-winrate">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Profit Factor</div>
                                <div class="stat-value" id="spaceman-stat-profitfactor">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Ganancia Total</div>
                                <div class="stat-value profit" id="spaceman-stat-totalprofit">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">P√©rdida Total</div>
                                <div class="stat-value loss" id="spaceman-stat-totalloss">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Ganancia/P√©rdida Net</div>
                                <div class="stat-value" id="spaceman-stat-net">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Mejor Racha</div>
                                <div class="stat-value profit" id="spaceman-stat-beststreak">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Peor Racha</div>
                                <div class="stat-value loss" id="spaceman-stat-worststreak">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Promedio Ganancia</div>
                                <div class="stat-value profit" id="spaceman-stat-avgprofit">--</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Promedio P√©rdida</div>
                                <div class="stat-value loss" id="spaceman-stat-avgloss">--</div>
                            </div>
                        </div>
                        <div class="performance-chart-container">
                            <h4>Evoluci√≥n del Bank</h4>
                            <svg id="spaceman-performance-chart" width="100%" height="150"></svg>
                        </div>
                    </div>
                </div>
                </section>

                <!-- Signal History Panel -->
                <section id="spaceman-signal-history-section">
                <div id="spaceman-signal-history-container">
                    <div class="history-header-section">
                        <h3>Historial de Se√±ales</h3>
                        <div class="history-controls">
                            <button id="spaceman-export-history" class="action-btn-small" title="Exportar historial">üì• Exportar</button>
                            <button id="spaceman-clear-history" class="action-btn-small danger" title="Limpiar historial">üóëÔ∏è Limpiar</button>
                        </div>
                    </div>
                    <div class="history-filters">
                        <select id="spaceman-filter-result" class="filter-select">
                            <option value="all">Todos los resultados</option>
                            <option value="win">Solo ganadas</option>
                            <option value="loss">Solo perdidas</option>
                        </select>
                        <select id="spaceman-filter-attempt" class="filter-select">
                            <option value="all">Todos los intentos</option>
                            <option value="1">1 intento</option>
                            <option value="2">2 intentos</option>
                        </select>
                        <input type="date" id="spaceman-filter-date" class="filter-select" title="Filtrar por fecha">
                    </div>
                    <div id="spaceman-signal-history-list">
                        <div class="history-empty">No hay se√±ales registradas a√∫n</div>
                    </div>
                </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modal de Meta Alcanzada para Spaceman -->
    <div id="spaceman-meta-alcanzada-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="spaceman-modal-titulo">Meta Alcanzada</h2>
                <button id="spaceman-modal-cerrar" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-stats-grid">
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Juegos Jugados:</span>
                        <span class="modal-stat-value" id="spaceman-modal-juegos-jugados">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganados a 1 Intento:</span>
                        <span class="modal-stat-value profit" id="spaceman-modal-ganados-1">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganados a 2 Intentos:</span>
                        <span class="modal-stat-value profit" id="spaceman-modal-ganados-2">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">P√©rdidas:</span>
                        <span class="modal-stat-value loss" id="spaceman-modal-perdidas">0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganancia Total:</span>
                        <span class="modal-stat-value profit" id="spaceman-modal-ganancia-total">$0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">P√©rdida Total:</span>
                        <span class="modal-stat-value loss" id="spaceman-modal-perdida-total">$0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Ganancia/P√©rdida Net:</span>
                        <span class="modal-stat-value" id="spaceman-modal-net">$0</span>
                    </div>
                    <div class="modal-stat-item">
                        <span class="modal-stat-label">Win Rate:</span>
                        <span class="modal-stat-value" id="spaceman-modal-winrate">0%</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="spaceman-modal-aceptar" class="modal-button">Aceptar</button>
            </div>
        </div>
    </div>

    
    
                                        
    <script src="https://d3js.org/d3.v7.min.js"></script>   
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@2.0.2/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.1.0/dist/chartjs-adapter-luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.1.1/dist/chartjs-chart-financial.min.js"></script>
    <script type="module" src="/src/spaceman-app.js"></script>
    <script type="module" src="/src/mini-chart.js"></script>
    <script type="module" src="/src/script.js"></script>
  </body>
</html>
